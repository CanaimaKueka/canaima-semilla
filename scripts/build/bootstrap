#!/bin/sh

# lh_bootstrap(1) - bootstrap a Debian system
# Copyright (C) 2006-2010 Daniel Baumann <daniel@debian.org>
#
# live-helper comes with ABSOLUTELY NO WARRANTY; for details see COPYING.
# This is free software, and you are welcome to redistribute it
# under certain conditions; see COPYING for details.

set -e

# Including common functions
. "${LH_BASE:-/usr/share/canaima-semilla}"/scripts/build.sh

# Setting static variables
DESCRIPTION="$(Echo 'bootstrap a Debian system')"
HELP=""
USAGE="${PROGRAM} [--force]"

Arguments "${@}"

# Reading configuration files
Read_conffiles config/all config/common config/bootstrap config/chroot config/binary config/source
Set_defaults

# Setup cleanup function
Setup_cleanup

Echo_message "--- ETAPA DE CREACIÓN DEL SISTEMA BASE ---"
Echo_message "En ésta etapa se crea un sistema linux dentro de una carpeta llamada chroot, en donde se genera un sistema de archivos unix típico, se configuran los archivos de sistema y se instalan paquetes básicos para tener un sistema minimalista y funcional. "

# Bootstrapping system
canaima-semilla bootstrap_cache restore ${*}
canaima-semilla bootstrap_copy ${*}
canaima-semilla bootstrap_cdebootstrap ${*}
canaima-semilla bootstrap_debootstrap ${*}
canaima-semilla bootstrap_cache save ${*}
